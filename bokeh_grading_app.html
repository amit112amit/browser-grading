<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interactive Grading</title>
    <script
      type="text/javascript"
      src="https://cdn.bokeh.org/bokeh/release/bokeh-2.3.2.min.js"
      crossorigin="anonymous"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.bokeh.org/bokeh/release/bokeh-api-2.3.2.min.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.6/jspdf.plugin.autotable.min.js"
      crossorigin="anonymous"
    ></script>

    <!-- The main javascript for the page -->
    <script type="text/javascript" src="gradinglogic.js" defer="defer"></script>

    <!-- The style sheet -->
    <link rel="stylesheet" href="gradingapp.css" />
  </head>
  <body>
    <!-- The header with logo -->
    <header>
      <img
        alt="BITS Logo"
        src="img/BITS_university_logo.gif"
        width="401"
        height="104"
      />
      <h1>Interactive Grading</h1>
      <img alt="ColorBand" src="img/ColorBand.png" width="559" height="6" />
    </header>

    <!-- The input fields and the buttons -->
    <div class="flexBox2">
      <div class="flexBox1">
        <div class="flexBox2">
          <div class="flexBox1">
            <label for="courseTitleInput"><b>Couse Title:</b></label>
            <input type="text" id="courseTitleInput" value="BITS F123 XYZ" />
          </div>
          <div class="flexBox1">
            <label for="courseTotalInput"><b>Couse Total:</b></label>
            <input
              type="number"
              id="courseTotalInput"
              min="0"
              max="500"
              value="100"
            />
          </div>
        </div>
        <div class="flexBox1">
          <label for="copyPasteData"><b>Enter Marks:</b></label>
          <textarea id="copyPasteData"></textarea>
        </div>
      </div>
      <div class="flexBox1">
        <button type="button" id="plotHistButton">Plot Histogram</button>
        <button type="button" id="savePDFButton">Save PDF</button>
        <button type="button" id="saveGradesButton">Save Grades</button>
      </div>
    </div>

    <!-- The statistics table -->
    <div class="flexBox1" id="output">
      <table>
        <tr>
          <th>Number of students</th>
          <th>Highest Marks</th>
          <th>Average Marks</th>
          <th>Lowest Marks</th>
        </tr>
        <tr>
          <td id="tdStudentCount">0</td>
          <td id="tdHighest">0</td>
          <td id="tdAverage">0</td>
          <td id="tdLowest">0</td>
        </tr>
      </table>
    </div>

    <!-- The histogram plot -->
    <div id="plotDiv"></div>

    <!-- The grade controllers -->
    <form autocomplete="off">
      <div class="gradeControls">
        <div class="gradeRow">
          <label for="aCheck"><b>A:</b></label>
          <input type="checkbox" id="aCheck" checked="true" />
          <input type="range" id="aSlider" min="0" max="100" value="80" />
          <input type="number" id="aSpinner" min="0" max="100" value="80" />
        </div>
        <div class="gradeRow">
          <label for="bCheck"><b>B:</b></label>
          <input type="checkbox" id="bCheck" checked="true" />
          <input type="range" id="bSlider" min="0" max="100" value="60" />
          <input type="number" id="bSpinner" min="0" max="100" value="60" />
        </div>
        <div class="gradeRow">
          <label for="cCheck"><b>C:</b></label>
          <input type="checkbox" id="cCheck" checked="true" />
          <input type="range" id="cSlider" min="0" max="100" value="40" />
          <input type="number" id="cSpinner" min="0" max="100" value="40" />
        </div>
        <div class="gradeRow">
          <label for="dCheck"><b>D:</b></label>
          <input type="checkbox" id="dCheck" checked="true" />
          <input type="range" id="dSlider" min="0" max="100" value="20" />
          <input type="number" id="dSpinner" min="0" max="100" value="20" />
        </div>
        <div class="gradeRow">
          <label for="amCheck"><b>A-:</b></label>
          <input type="checkbox" id="amCheck" checked="false" />
          <input type="range" id="amSlider" min="0" max="100" value="70" />
          <input type="number" id="amSpinner" min="0" max="100" value="70" />
        </div>
        <div class="gradeRow">
          <label for="bmCheck"><b>B-:</b></label>
          <input type="checkbox" id="bmCheck" checked="false" />
          <input type="range" id="bmSlider" min="0" max="100" value="50" />
          <input type="number" id="bmSpinner" min="0" max="100" value="50" />
        </div>
        <div class="gradeRow">
          <label for="cmCheck"><b>C-:</b></label>
          <input type="checkbox" id="cmCheck" checked="false" />
          <input type="range" id="cmSlider" min="0" max="100" value="30" />
          <input type="number" id="cmSpinner" min="0" max="100" value="30" />
        </div>
        <div class="gradeRow">
          <label for="eCheck"><b>E:</b></label>
          <input type="checkbox" id="eCheck" checked="false" />
          <input type="range" id="eSlider" min="0" max="100" value="10" />
          <input type="number" id="eSpinner" min="0" max="100" value="10" />
        </div>
      </div>
    </form>

    <!-- The footer with the color band and the motto -->
    <footer>
      <div class="flexBox2">
        <img alt="ColorBand" src="img/ColorBand.png" width="559" height="6" />
        <button
          id="helpButton"
          title="Click here for user guide"
          type="button"
          onclick="turnOnHelp()"
        >
          Need help?
        </button>
      </div>
      <img alt="Motto" src="img/Motto.png" width="274" height="89" />
    </footer>

    <!-- The user guide overlay -->
    <div id="overlay" onclick="turnOffHelp()">
      <p>Click anywhere to go back.</p>
      <ul>
        <li>
          For best experience, open this page on a large screen device like a
          laptop or a tablet.
        </li>
        <li>
          To begin, enter a list of marks in the "Enter Marks" text area. For
          example, you may copy and paste a column or a row from a spreadsheet
          into the text area.
        </li>
        <li>
          Click the "Plot Histogram" button. Some of the buttons and the grade
          settings will remain disabled until a valid marks data is entered and
          a histogram is plotted.
        </li>
        <li>
          Verify the number of students, the highest, lowest and the average
          marks displayed in the table below the "Plot Histogram" button. All
          the scores are rounded-off to the nearest integer before calculating
          the statistics.
        </li>
        <li>
          Enter the course code and title. This will be used as the title of the
          histogram plot and also for the downloaded PDF file.
        </li>
        <li>
          Enter the course total. This is the maximum possible marks for the
          course. It sets the x-axis limit of the histogram plot. On the
          top-right of the plot, there is a toolbar with buttons to pan, zoom
          and reset the plot view.
        </li>
        <li>
          Hover over any of the bars in the histogram to see the marks and the
          number of student who got that marks as a tooltip.
        </li>
        <li>
          Enable or disable various grades using the checkboxes at the bottom of
          the page. When a grade is unchecked, the corresponding slider and text
          box are also disabled.
        </li>
        <li>
          Adjust the cut-off for the grades using the corresponding slider. For
          fine-grained control on the slider, click it and then
          <b>use the keyboard arrow keys </b> to move it. It is also possible to
          directly type the cut-off in the text box next to the slider. There
          are up and down arrows on the text box to increment or decrement the
          cut-off by 1.
        </li>
        <li>
          The MGPA of the course is dynamically updated in the title of the plot
          as the grade cut-offs are varied.
        </li>
        <li>
          Once you are satisfied with the grade cut-offs, you can click the
          "Save PDF" button to download a PDF file containing the histogram and
          a summary table showing the grade boundaries and the number of
          students in each grade.
        </li>
        <li>
          You can also click "Save Grades" button to download a CSV file
          containing the letter grades for each marks that you entered in the
          text area in the same sequence.
        </li>
        <li>
          For any bugs or usability issues please contact
          <em>amit.singh@pilani.bits-pilani.ac.in</em>
        </li>
      </ul>
    </div>

    <!-- The small script for showing help -->
    <script>
      function turnOnHelp() {
        document.getElementById("overlay").style.display = "block";
      }
      function turnOffHelp() {
        document.getElementById("overlay").style.display = "none";
      }
    </script>
  </body>
</html>
